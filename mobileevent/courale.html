<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<title>coursale</title>
	<style>
	html,body {
		width: 100%;
		height: 100%;
		margin: 0;
		padding: 0;
	}
	.box {
		width: 100%;
		overflow: hidden;
	}
	.box ul {
		position: relative;
		overflow: hidden;
		list-style: none;
		padding:0;
		margin: 0;
		top: 0;
		left: 0;
	}
	 li {
		float: left;
		padding:0;
		margin: 0;
	}
	.box a {
		display: block;
		width: 100%;
	}
	.box img {
		width: 100%;
		height: auto;
		vertical-align: middle;
	}
</style>
</head>
<body>
	<div class="box">
		<ul>
			<li><a href="javascript:;"><img src="./image/0.png" alt=""></a></li>
			<li><a href="javascript:;"><img src="./image/1.png" alt=""></a></li>
			<li><a href="javascript:;"><img src="./image/2.png" alt=""></a></li>
			<li><a href="javascript:;"><img src="./image/3.png" alt=""></a></li>
			<li><a href="javascript:;"><img src="./image/4.png" alt=""></a></li>
			<li><a href="javascript:;"><img src="./image/5.png" alt=""></a></li>
			<li><a href="javascript:;"><img src="./image/6.png" alt=""></a></li>
			<li><a href="javascript:;"><img src="./image/7.png" alt=""></a></li>
		</ul>
	</div>
	<script>
		var box =document.querySelector('.box');
		var ul =document.querySelector('ul');
		var firstchild = document.querySelector('li:first-child');
		var lastchild = document.querySelector('li:last-child');
		var startx,starty,endx,endy,index=0,timer,w;
		//1.布局
		  function init () {
		 	 w = box.offsetWidth;
		 	ul.appendChild(firstchild.cloneNode(true));
		 	ul.insertBefore(lastchild.cloneNode(true),firstchild);
		 	var liarr = document.querySelectorAll('li');
		 	for(var i=0;i<liarr.length;i++){
		 		liarr[i].style.width = w + 'px';
		 	};
		 	ul.style.width = liarr.length*w + 'px';
		 	index--;
		 	ul.style.left = index*w + 'px';
		 	autoPlay();
		 };
		 function autoPlay (){
		 	timer = setInterval(function(){
		 	  index--;
	          ul.style.left = index*w + 'px';
	          ul.style.transition = 'all 1s';
		 	},1500);
		 };
		 ul.addEventListener('webkitTransitionEnd',function(){
		 	if(index==-9){
	          	index=-1;
	          };
	          if(index==0){
		 	    index=-8;
		 	   };
		 	   ul.style.left = index*w + 'px';
      // 3.5 去除ul的过渡效果
               ul.style.transition = null;
		 })
		 ul.addEventListener('touchstart',function(e){
		 	clearInterval(timer);
		 	var touches = e.targetTouches[0];
		 	    startx = touches.clientX;
		 	    starty = touches.clentY;
		 });
		 ul.addEventListener('touchend',function(e){
		 	var touches = e.changedTouches[0];
		 	    endx = touches.clientX;
		 	    endy = touches.clientY;
		 	    if(endx>startx){
		 	    	index++;
		 	    	ul.style.left = index*w + 'px';
		 	    	ul.style.transition = 'all 1s';
		 	    	
		 	    }else {
		 	    	index--;
	                ul.style.left = index*w + 'px';
	                ul.style.transition = 'all 1s';		 	    	
		 	    }
		 })

		init();
	</script>
	
</body>
</html>